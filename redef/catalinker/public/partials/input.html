<div class="input-panel pure-u-1-1 prop-input" decorator="repositionSupportPanel" {{#if
     resourceIsLoaded(showOnlyWhenEmpty) }} style="display:none;" {{/if}}>
<div class="pure-u-1-2 label {{firstInGroup ? 'first':''}} panel-part"
     data-uri-escaped-label="{{encodeURI(label)}}">{{label}}
</div>
<span class="panel-part pure-u-1-2 {{lastInGroup ? 'last':''}}">
        {{#each values:index}}
        <span class="field pure-u-1-1" id="support_panel_base_{{uniqueId}}">
            {{>type}}
            {{#predicate === (config.ontologyUri + "#recordID") && current.value !== ""}}
            <a data-automation-id="biblio_record_link" target="_blank"
               href="{{config.kohaIntraUri}}/cgi-bin/koha/catalogue/detail.pl?biblionumber={{current.value}}"
               class="link"></a>
            {{/}}
            {{#predicate === (config.ontologyUri + "#publicationOf") && current.value !== ""}}
            <a data-automation-id="work_page_link" target="_blank" href="{{current.value.replace(':8005',':8000')}}"
               class="link"></a>
            {{/}}
            <div class="invalid-msg">{{#error}}{{error}}{{/error}}</div>
        </span>
        {{#index == values.length -1}}
        <span class="support-panel" data-support-panel-base-ref="support_panel_base_{{uniqueId}}">
            {{>"support-for-"+type}}
        </span>
        {{/}}
        {{/each}}
    {{#if subInputs}}
    {{#each subInputs[0].input.values:inputValueIndex}}
        <span class="pure-u-1-1 field {{#if cssClassPrefix}}{{cssClassPrefix}}-{{nonEditable ? 'non-' :''}}editable{{/if}}"
              {{#if
              nonEditable}}disabled="disabled" {{/if}}>
            {{#if nonEditable}}
            <a class="delete" title="Slett oppføring"
               on-click="deleteObject:{{../../../input.parentInput}},{{inputValueIndex}}"></a>
            {{/if}}
            <span class="input-wrapper">
                <span class="inputs">
                    {{#each ../../../../../subInputs}}
                        <span class="input {{#if !nonEditable}}pure-u-1-1{{/if}}">
                            <span class="label {{#if !nonEditable}}pure-u-1-1{{/if}}"
                                  data-uri-escaped-label="{{encodeURI(label)}}">{{label}}</span>
                            {{#with input.values[inputValueIndex]}}
                                <span class="value sub-field" id="support_panel_base_{{uniqueId}}">
                                    {{>../../../input.type}}
                                </span>
                                {{#if ! nonEditable}}
                                    <span class="support-panel"
                                          data-support-panel-base-ref="support_panel_base_{{uniqueId}}">
                                        {{#with ../../../input}}
                                        {{>"support-for-"+type}}
                                        {{/with}}
                                    </span>
                                {{/if}}
                            {{/with}}
                            <span class="invalid-msg {{#if !nonEditable}}pure-u-1-1{{/if}}">{{#error}}{{error}}{{/error}}</span>
                        </span>
                    {{/each}}
                </span>
                <span class="subject-type-association">
                    <form>
                    <span class="{{#if !nonEditable}}pure-u-1-1{{/if}}">
                        {{#with ../../../parentInput}}
                            {{#if ! nonEditable }}
                                {{#each subjectTypes:index}}
                                {{#with ./subInputs[0].input.values[inputValueIndex]}}
                                    <span class="subject-type-select" {{#if (subjectTypes.length== 1) }}
                                          style="display:none" {{/if}}>
                                        <input type="radio" name="{{~/inputGroups[groupIndex].inputs[0].subInputs[0].input.values[inputValueIndex].subjectType}}" value="{{subjectTypes[index]}}"
                                               {{# false && !
                                               targetUri[.]}}title='Denne knytningen kan ikke velges før tilhørende ressurstype er lastet'
                                               disabled='disabled' {{/}}/>
                                        <label>{{subjectTypeLabel(subjectTypes[index])}}</label>
                                    </span>
                                {{/with}}
                                {{/each}}
                                <div>
                                    <a class="pure-button pure-button-primary add-item-button"
                                       {{#if typeof subjectType=== 'undefined' || values.length == 0 || (!resourceIsLoaded(subjectType)) || ../../../inputGroupRequiredVetoes[inputValueIndex].length > 0}}disabled
                                      title="Kan ikke legge til før {{subjectTypeLabelDet(subjectType)}} er opprettet eller lastet. Påkrevde felter må være utfylt eller ha valgt autoritet/fast verdi."{{/if}}
                                       on-click="saveObject:{{inputValueIndex}}">Legg til</a>
                                </div>
                            {{/if}}
                        {{/with}}

                        {{#if nonEditable}}
                            {{subjectTypeLabelDet(subjectType)}}
                        {{/if}}
                    </span>
                </form>
                </span>
            </span>
</span>
{{/each}}
{{/if}}
{{#multiple && allowAddNewButton}}
<span class="pure-u-1-1">
        <div class="add-new-btn-row">
            <div class="pure-u-1-12"> </div>
            <a class="pure-button pure-button-primary" on-click="addValue">{{addAnotherLabel || 'Legg til ny'}}</a>
        </div>
    </span>
{{/}}
</div>
