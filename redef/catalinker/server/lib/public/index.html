<!DOCTYPE html>
<html>
  <head>
  	<meta charset='utf-8'>
    <title>Katalogisering</title>
    <style type="text/css">
      body       { margin: 40px auto; max-width: 1250px; line-height: 1.6; font-size: 18px; color: #222; padding: 0 10px }
      h1, h2, h3 { line-height: 1.2 }
      fieldset   { border: 0; background: #eee;}
      input      { width: 300px; padding: 3px; margin: 0 1em; }
      label      { font-family: monospace;}
    </style>
    <script src="lib.js"></script>
  </head>
  <body>
    <fieldset>
      <label>URI: </label><input id="work_uri" disabled="disabled" data-automation-id="work_uri" value=""></input>
    </fieldset>
    <script>
      var ontology;
      var work_uri;

      http.get("/config",
        function( response )Â {
          cfg = JSON.parse( response.responseText );

          // fetch ontology
          http.get(cfg.ontologyUri,
            function( response ) {
              ontology = JSON.parse( response.responseText );
            },
            function( response ) {
              console.log( "GET ontology error: " + response );
          });

          // fetch URI for work
          http.post(cfg.resourceApiUri + "work", "{}",
            function( response ) {
              work_uri = response.getResponseHeader( "Location" );
              document.getElementById( "work_uri" ).value = work_uri;
            },
            function( response ) {
              console.log( "POST work error: " + response );
          });
        },
        function( response ) {
          console.log( "GET config error: " + response );
      });
    </script>
  </body>
</html>